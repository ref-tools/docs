---
title: 'MCP Configuration'
description: 'Configure AI tools to use the Ref MCP server'
---

## Configuration Overview

After installing the Ref MCP server, you need to configure your AI tools to use it. Each tool has its own configuration method, but the core concepts are similar.

<CardGroup cols={2}>
  <Card
    title="Claude Desktop"
    icon="robot"
  >
    JSON configuration file with server settings
  </Card>
  <Card
    title="Cursor"
    icon="cursor-click"
  >
    Built-in MCP server management
  </Card>
  <Card
    title="VS Code"
    icon="code"
  >
    Extension-based configuration
  </Card>
  <Card
    title="Custom Clients"
    icon="wrench"
  >
    Programmatic MCP client setup
  </Card>
</CardGroup>

## Configuration Format

Most MCP-compatible tools use this configuration structure:

```json
{
  "mcpServers": {
    "ref": {
      "command": "ref-mcp-server",
      "env": {
        "REF_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

## Claude Desktop Configuration

### Configuration File Location

Claude Desktop stores MCP configuration in a JSON file:

<AccordionGroup>
  <Accordion title="macOS">
    ```bash
    ~/Library/Application Support/Claude/claude_desktop_config.json
    ```
    
    Open with:
    ```bash
    open ~/Library/Application\ Support/Claude/claude_desktop_config.json
    ```
    
    If file doesn't exist, create it:
    ```bash
    mkdir -p ~/Library/Application\ Support/Claude
    touch ~/Library/Application\ Support/Claude/claude_desktop_config.json
    ```
  </Accordion>

  <Accordion title="Windows">
    ```
    %APPDATA%\Claude\claude_desktop_config.json
    ```
    
    Open with:
    ```cmd
    notepad %APPDATA%\Claude\claude_desktop_config.json
    ```
    
    If directory doesn't exist:
    ```cmd
    mkdir %APPDATA%\Claude
    ```
  </Accordion>

  <Accordion title="Linux">
    ```bash
    ~/.config/Claude/claude_desktop_config.json
    ```
    
    Open with:
    ```bash
    nano ~/.config/Claude/claude_desktop_config.json
    ```
    
    If directory doesn't exist:
    ```bash
    mkdir -p ~/.config/Claude
    ```
  </Accordion>
</AccordionGroup>

### Basic Configuration

Add this configuration to your `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "ref": {
      "command": "ref-mcp-server",
      "env": {
        "REF_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

### Advanced Configuration

Include additional settings for customization:

```json
{
  "mcpServers": {
    "ref": {
      "command": "ref-mcp-server",
      "args": ["--verbose"],
      "env": {
        "REF_API_KEY": "your-api-key-here",
        "REF_TIMEOUT": "30000",
        "REF_MAX_RESULTS": "15",
        "REF_DEBUG": "false"
      }
    }
  }
}
```

### Alternative Installation Methods

<AccordionGroup>
  <Accordion title="NPX Command">
    If you prefer not to install globally:
    ```json
    {
      "mcpServers": {
        "ref": {
          "command": "npx",
          "args": ["@ref-tools/mcp-server"],
          "env": {
            "REF_API_KEY": "your-api-key-here"
          }
        }
      }
    }
    ```
  </Accordion>

  <Accordion title="Source Build Path">
    If you built from source:
    ```json
    {
      "mcpServers": {
        "ref": {
          "command": "node",
          "args": ["/path/to/ref-tools-mcp/dist/index.js"],
          "env": {
            "REF_API_KEY": "your-api-key-here"
          }
        }
      }
    }
    ```
  </Accordion>

  <Accordion title="Docker Container">
    For containerized deployment:
    ```json
    {
      "mcpServers": {
        "ref": {
          "command": "docker",
          "args": [
            "run", "--rm", "-i",
            "-e", "REF_API_KEY=your-api-key-here",
            "ref-tools/mcp-server:latest"
          ]
        }
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Cursor Configuration

Cursor provides multiple ways to configure MCP servers:

### Method 1: One-Click Installation

Use the deeplink installation:
```
cursor://install-mcp?name=ref&package=@ref-tools/mcp-server&env=REF_API_KEY=your-api-key
```

### Method 2: Settings UI

1. Open Cursor Settings
2. Navigate to Extensions â†’ MCP Servers
3. Click "Add Server"
4. Configure:
   - **Name**: `ref`
   - **Package**: `@ref-tools/mcp-server`
   - **Environment**: `REF_API_KEY=your-api-key`

### Method 3: Configuration File

Edit Cursor's MCP configuration file:

```json
{
  "mcpServers": {
    "ref": {
      "command": "npx",
      "args": ["@ref-tools/mcp-server"],
      "env": {
        "REF_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

## VS Code Configuration

VS Code requires an MCP-compatible extension. Configuration varies by extension:

### With MCP Extension

1. Install an MCP extension from the marketplace
2. Open VS Code settings (JSON)
3. Add MCP configuration:

```json
{
  "mcp.servers": {
    "ref": {
      "command": "ref-mcp-server",
      "env": {
        "REF_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

### Workspace Configuration

For project-specific configuration, create `.vscode/settings.json`:

```json
{
  "mcp.servers": {
    "ref": {
      "command": "ref-mcp-server",
      "env": {
        "REF_API_KEY": "${REF_API_KEY}",
        "REF_TEAM_ID": "your-team-id"
      }
    }
  }
}
```

Then set environment variables in your shell or `.env` file.

## Environment Variables

Configure the MCP server behavior with environment variables:

### Required Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `REF_API_KEY` | Your Ref API key | `ref_api_1234567890abcdef` |

### Optional Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `REF_API_ENDPOINT` | `https://ref.tools/api` | API endpoint URL |
| `REF_TIMEOUT` | `30000` | Request timeout (ms) |
| `REF_MAX_RESULTS` | `10` | Maximum search results |
| `REF_DEBUG` | `false` | Enable debug logging |
| `REF_CACHE_TTL` | `3600` | Cache time-to-live (seconds) |
| `REF_TEAM_ID` | - | Team ID for team features |

### Setting Environment Variables

<AccordionGroup>
  <Accordion title="Direct in Configuration">
    ```json
    {
      "mcpServers": {
        "ref": {
          "command": "ref-mcp-server",
          "env": {
            "REF_API_KEY": "your-api-key",
            "REF_TIMEOUT": "45000",
            "REF_DEBUG": "true"
          }
        }
      }
    }
    ```
  </Accordion>

  <Accordion title="System Environment Variables">
    ```bash
    # In your shell profile (.bashrc, .zshrc, etc.)
    export REF_API_KEY="your-api-key"
    export REF_TIMEOUT="30000"
    export REF_DEBUG="false"
    ```
    
    Then use in configuration:
    ```json
    {
      "mcpServers": {
        "ref": {
          "command": "ref-mcp-server"
        }
      }
    }
    ```
  </Accordion>

  <Accordion title="Environment File">
    Create `.env` file:
    ```
    REF_API_KEY=your-api-key
    REF_TIMEOUT=30000
    REF_DEBUG=false
    ```
    
    Load with:
    ```json
    {
      "mcpServers": {
        "ref": {
          "command": "ref-mcp-server",
          "args": ["--env-file", ".env"]
        }
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Team Configuration

For team setups, use team-specific settings:

```json
{
  "mcpServers": {
    "ref": {
      "command": "ref-mcp-server",
      "env": {
        "REF_API_KEY": "team-api-key",
        "REF_TEAM_ID": "your-team-id",
        "REF_MAX_RESULTS": "20"
      }
    }
  }
}
```

### Multiple Configurations

Run multiple MCP server instances for different contexts:

```json
{
  "mcpServers": {
    "ref-personal": {
      "command": "ref-mcp-server",
      "env": {
        "REF_API_KEY": "personal-api-key"
      }
    },
    "ref-work": {
      "command": "ref-mcp-server",
      "args": ["--port", "8081"],
      "env": {
        "REF_API_KEY": "work-team-api-key",
        "REF_TEAM_ID": "work-team-id"
      }
    }
  }
}
```

## Custom MCP Clients

For building custom integrations:

### Node.js Client

```javascript
import { Client } from '@modelcontextprotocol/sdk/client/index.js';
import { StdioClientTransport } from '@modelcontextprotocol/sdk/client/stdio.js';

const transport = new StdioClientTransport({
  command: 'ref-mcp-server',
  env: {
    REF_API_KEY: process.env.REF_API_KEY,
    REF_DEBUG: 'true'
  }
});

const client = new Client({
  name: "my-ref-client",
  version: "1.0.0"
}, {
  capabilities: {}
});

await client.connect(transport);

// Use the client
const result = await client.callTool({
  name: 'ref_search_documentation',
  arguments: { query: 'React hooks' }
});
```

### Python Client

```python
import subprocess
import json
import os

class RefMCPClient:
    def __init__(self, api_key):
        self.process = subprocess.Popen(
            ['ref-mcp-server'],
            stdin=subprocess.PIPE,
            stdout=subprocess.PIPE,
            stderr=subprocess.PIPE,
            env={**os.environ, 'REF_API_KEY': api_key},
            text=True
        )
    
    def search(self, query):
        request = {
            "jsonrpc": "2.0",
            "method": "tools/call",
            "params": {
                "name": "ref_search_documentation",
                "arguments": {"query": query}
            },
            "id": 1
        }
        
        self.process.stdin.write(json.dumps(request) + '\n')
        self.process.stdin.flush()
        
        response = self.process.stdout.readline()
        return json.loads(response)
```

## Verification

Test your configuration:

### 1. Restart AI Tool

After configuration changes:
- Close and restart Claude Desktop
- Reload Cursor window
- Restart VS Code

### 2. Check Connection

Look for MCP server indicators in your AI tool:
- Connection status indicators
- Available tools/commands
- Error messages in console/logs

### 3. Test Functionality

Try using Ref tools:

```text
# In Claude Desktop or compatible tool
Can you search for React hooks documentation?

# Or explicitly use tools
Use ref_search_documentation to find information about useState
```

### 4. Debug Issues

Enable debug mode for troubleshooting:

```json
{
  "mcpServers": {
    "ref": {
      "command": "ref-mcp-server",
      "env": {
        "REF_API_KEY": "your-api-key",
        "REF_DEBUG": "true"
      }
    }
  }
}
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Server Not Starting">
    **Symptoms**: MCP server tools not available
    
    **Check**:
    ```json
    // Verify command is correct
    {
      "mcpServers": {
        "ref": {
          "command": "which ref-mcp-server"  // Test command exists
        }
      }
    }
    ```
    
    **Common Issues**:
    - Command not in PATH
    - Incorrect command name
    - Missing permissions
    - Node.js not installed
  </Accordion>

  <Accordion title="Authentication Errors">
    **Symptoms**: "Invalid API key" or "Unauthorized"
    
    **Check**:
    - API key is correct (no extra spaces/quotes)
    - Environment variable is set properly
    - Key hasn't expired or been revoked
    - Test API key directly:
    ```bash
    curl -H "Authorization: Bearer $REF_API_KEY" \
         https://ref.tools/api/search \
         -d '{"query":"test"}'
    ```
  </Accordion>

  <Accordion title="Configuration Not Loading">
    **Symptoms**: Changes don't take effect
    
    **Solutions**:
    - Verify JSON syntax is valid
    - Check file location is correct
    - Restart AI tool completely
    - Check for multiple config files
    - Verify file permissions
  </Accordion>

  <Accordion title="Tools Not Working">
    **Symptoms**: MCP tools available but not functioning
    
    **Debug**:
    ```json
    {
      "mcpServers": {
        "ref": {
          "command": "ref-mcp-server",
          "args": ["--test-mode"],
          "env": {
            "REF_API_KEY": "your-api-key",
            "REF_DEBUG": "true"
          }
        }
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Security Best Practices

<CardGroup cols={2}>
  <Card title="API Key Security">
    - Store keys in environment variables
    - Never commit keys to version control
    - Use different keys per environment
    - Rotate keys regularly
  </Card>
  
  <Card title="Configuration Security">
    - Set proper file permissions
    - Use least-privilege access
    - Audit configuration changes
    - Monitor for unauthorized access
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Explore MCP Tools"
    icon="tools"
    href="/mcp/tools"
  >
    Learn about available Ref MCP tools
  </Card>
  <Card
    title="Tool-Specific Guides"
    icon="book"
    href="/installation/overview"
  >
    Detailed guides for specific AI tools
  </Card>
  <Card
    title="Advanced Usage"
    icon="settings"
    href="/features/search"
  >
    Advanced features and customization
  </Card>
  <Card
    title="Get Support"
    icon="life-ring"
    href="/support/contact"
  >
    Get help with configuration issues
  </Card>
</CardGroup>

Configuration complete? Start using Ref tools in your AI conversations!